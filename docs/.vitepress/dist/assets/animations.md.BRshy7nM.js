import{_ as i,c as t,o as a,ah as n,ai as o}from"./chunks/framework.l_r_SdPt.js";const f=JSON.parse('{"title":"Animations","description":"","frontmatter":{},"headers":[],"relativePath":"animations.md","filePath":"animations.md"}'),s={name:"animations.md"};function r(l,e,h,c,d,m){return a(),t("div",null,[...e[0]||(e[0]=[n('<h1 id="animations" tabindex="-1">Animations <a class="header-anchor" href="#animations" aria-label="Permalink to “Animations”">​</a></h1><p>In Tiled, animations are assigned to tiles within a <a href="./tilesets.html">spritesheet</a>. To an assign an animation to a tile, select a tile — preferably something indicative of what the animation will be, such as a first step for a walking animation — and press the button for the animation editor, which looks like a movie camera:</p><p><img src="'+o+'" alt="the fourth icon is a movie camera"></p><p>You will then see a second window for assigning frames to your animation. Set the frame duration (in milliseconds), then double click on the desired tile to add it as a frame to the animation. You can adjust the timing of the frames or move/remove frames as you like, and you&#39;ll be able to see your changes live in the preview directly below.</p><h2 id="mge-animation-considerations" tabindex="-1">MGE Animation Considerations <a class="header-anchor" href="#mge-animation-considerations" aria-label="Permalink to “MGE Animation Considerations”">​</a></h2><p>For <a href="./entity_types.html#character-entities">character entities</a>, you need not prepare an animation for all cardinal directions — e.g. there is only a fright/shock animation in <em>Chrono Trigger</em> for the south direction.</p><p>The <a href="./encoder.html">encoder</a> accommodates animation flipping with its <a href="./entity_management_system.html">entity management system</a>, so you don&#39;t need sprite tiles for both left-facing and right-facing sprites if you&#39;re comfortable with mirroring your left-facing and right-facing sprites.</p><p>The Mage Game Engine (MGE) animation system requires that each animation have at least two frames, though, so for animations that aren&#39;t actually &quot;animated,&quot; you might set two of the same frame back-to-back. #researchthis</p><h2 id="animation-types" tabindex="-1">Animation Types <a class="header-anchor" href="#animation-types" aria-label="Permalink to “Animation Types”">​</a></h2><p>Three types of animations are built into the MGE for <a href="./entity_types.html#character-entities">character entities</a>, and they are triggered in straightforward and predictable ways. <code>entity_types.json</code> defines which animations are of which type, and they can be defined and adjusted within the <a href="./encoder.html">encoder</a> or manually with a text editor.</p><h3 id="idle" tabindex="-1">Idle <a class="header-anchor" href="#idle" aria-label="Permalink to “Idle”">​</a></h3><p>This is what the character entity does by default.</p><p>Usually the idle consists of long periods of stillness, followed by a brief fidget: a blink, a small movement of the head, a sheep chewing its cud etc. For flying entities, the idle will likely consist of the entity hovering in place.</p><p>The idle animation does not include things like turning around to face different things, nor should it include multiple kinds of fidgets that interact with complex timing. If you want an entity to do more complex behaviors when idle, including facing somewhere specific or playing back other kinds of animations once in a while (a sheep that performs a chewing animation twice a second but lowers its head to chomp a fresh mouthful of grass every 15 seconds), consider using an <code>on_tick</code> script to handle this instead.</p><p>Entities look far more alive with an idle animation, even if it&#39;s just an occasional blink. Regardless, while the entity need not <em>appear</em> to have an idle animation, the MGE still expects one, so you should define one, even if it&#39;s just the same two frames back-to-back.</p><p>Idle animations are expected to loop seamlessly.</p><div class="tip custom-block"><p class="custom-block-title">Best Practice</p><p>To avoid robotic synchronization between entities, try to stagger their animation timings by setting the <code>current_frame</code> property for that entity on their Tiled map or via <code>SET_ENTITY_CURRENT_FRAME</code> inside a <a href="./scripts.html">script</a>.</p></div><h3 id="walking" tabindex="-1">Walking <a class="header-anchor" href="#walking" aria-label="Permalink to “Walking”">​</a></h3><p>This animation plays when entities move within the game. For flying or hovering entities without an explicit walk cycle, you can simply re-use the idle animation.</p><p>Walking animations are expected to loop seamlessly.</p><h3 id="action" tabindex="-1">Action <a class="header-anchor" href="#action" aria-label="Permalink to “Action”">​</a></h3><p>This animation plays for the player character when the player presses the &quot;action&quot; button. It can also be deliberately triggered for arbitrary character entities via a script.</p><div class="tip custom-block"><p class="custom-block-title">Best Practice</p><p>The engine uses the modulo of the animation index for playback, so if there is no action animation defined, likely the idle animation will play instead. If the idle animation is quite long, this means the entity will be frozen in place, doing apparently nothing, for some time. (For the player character, this also prevents the player from moving or doing anything else until the animation is finished.) Therefore, it&#39;s best to provide an action animation, even if there aren&#39;t sprite tiles prepared specifically for an action animation. Our recommendation is to copy the fidget portion of the idle and to keep it brief.</p></div><p>Action animations are not expected to loop. Instead they are expected to interrupt the idle/walk animation, play once, and then the idle/walk animation will resume.</p><h3 id="additional-animations" tabindex="-1">Additional Animations <a class="header-anchor" href="#additional-animations" aria-label="Permalink to “Additional Animations”">​</a></h3><p>You can add additional animations after the first three, too, as you like.</p><p>These animations can only be triggered by scripts, either for an arbitrary number of loops with <code>PLAY_ENTITY_ANIMATION</code>, or indefinitely with <code>SET_ENTITY_CURRENT_ANIMATION</code>.</p><p>Any animation set this way will be overridden by the walk animation if the character entity is compelled to move, and the entity will return to its idle after the walk motion is completed. (Teleports are an exception because entities don&#39;t switch animations when teleported.)</p><h2 id="animation-transitions-and-vamping" tabindex="-1">Animation Transitions and Vamping <a class="header-anchor" href="#animation-transitions-and-vamping" aria-label="Permalink to “Animation Transitions and Vamping”">​</a></h2><p>An action animation cannot be started and held (or <a href="https://en.wikipedia.org/wiki/Ostinato#Musical_theater" target="_blank" rel="noreferrer">vamped</a>) for an indeterminate length of time. If you want an action animation to behave this way, you&#39;ll need to split the animation into three pieces: the start transition, the &quot;vamp,&quot; and the end transition. Trigger each with a script:</p><ul><li><code>PLAY_ENTITY_ANIMATION</code> with a <code>play_count</code> of <code>1</code> for the start transition</li><li><code>SET_ENTITY_CURRENT_ANIMATION</code> for the &quot;vamp,&quot; or the portion you want to repeat for an indeterminate amount of time</li><li><code>PLAY_ENTITY_ANIMATION</code> with a <code>play_count</code> of <code>1</code> for the end transition</li></ul><p>See Strong Bad in the Bob-Only Club cutscene in Chapter 1 of the Black Mage Game for an example of this approach.</p><h2 id="mge-animation-timing" tabindex="-1">MGE Animation Timing <a class="header-anchor" href="#mge-animation-timing" aria-label="Permalink to “MGE Animation Timing”">​</a></h2><p>Requirements:</p><ul><li>Animations must have less than 256 frames.</li><li>Frames must be less than 65,535 milliseconds long.</li><li>(Don&#39;t worry, these are very difficult limits to hit!)</li></ul><p>Animation frames will play for a minimum of one game frame regardless of duration (which, on the badge hardware, is currently in the ballpark of 130 ms, or 8 fps), so animations might play back very slowly in practice if you are frequently using short durations.</p><div class="tip custom-block"><p class="custom-block-title">Best Practices</p><p>Because animations are not aborted when a character entity faces a new direction (it picks up where it left off in the new direction), it is beneficial to keep each animation of the same type completely uniform in terms of frame count and frame duration. This includes animations with fewer unique frames than others of its type, such as an animation from behind (where the face is obscured).</p><p>In addition, we recommend making sure each animation of the same type uses the same tile rows for each frame, even if some of the tiles within the column are technically identical, so that future changes to any of the previously identical frames will not create the need for timing adjustments.</p></div><h2 id="assigning-animations-to-character-entities" tabindex="-1">Assigning Animations to Character Entities <a class="header-anchor" href="#assigning-animations-to-character-entities" aria-label="Permalink to “Assigning Animations to Character Entities”">​</a></h2><p>For <a href="./entity_types.html#character-entities">character entities</a>, animations are assigned to an animation type (idle, walk, etc.) and a cardinal direction (north, east, etc.) elsewhere; this cannot be done with Tiled. The <a href="./entity_management_system.html">entity management system</a> in the <a href="./encoder.html#web-encoder">web encoder</a> can help you assign animations to character entities if you don&#39;t want to do it by hand.</p>',39)])])}const u=i(s,[["render",r]]);export{f as __pageData,u as default};
