import{_ as t,c as a,o as i,ah as s}from"./chunks/framework.l_r_SdPt.js";const g=JSON.parse('{"title":"Debug Tools","description":"","frontmatter":{},"headers":[],"relativePath":"debug_tools.md","filePath":"debug_tools.md"}'),o={name:"debug_tools.md"};function n(r,e,l,h,d,c){return i(),a("div",null,[...e[0]||(e[0]=[s(`<h1 id="debug-tools" tabindex="-1">Debug Tools <a class="header-anchor" href="#debug-tools" aria-label="Permalink to “Debug Tools”">​</a></h1><h2 id="debug-mode" tabindex="-1">Debug Mode <a class="header-anchor" href="#debug-mode" aria-label="Permalink to “Debug Mode”">​</a></h2><p>Debug mode is triggered in-game by pressing <code>XOR</code> and <code>MEM1</code> (the top button on the left of the screen and the second button on the right) at the same time. On desktop: press <code>F1</code> and <code>F6</code> instead. This counts as a map reload. When debug mode is activated, the current map is reloaded with <code>is_debug</code> entities included.</p><p>Turn off debug mode in the same way.</p><h3 id="debug-entities" tabindex="-1">Debug Entities <a class="header-anchor" href="#debug-entities" aria-label="Permalink to “Debug Entities”">​</a></h3><p>Normally, the Mage Game Engine (MGE) omits entities with the <code>is_debug</code> value of <code>true</code> when loading maps. Such entities effectively do not exist in &quot;production mode,&quot; and therefore will not be included in the list of entities in the hex editor, will not appear anywhere on the map, cannot be the target of script, etc.</p><p>The chapter 1 version of the engine <em>must</em> use debug entities to trigger debug scripts, as the serial terminal was not implemented yet, and there was not yet an action to check whether debug mode is on.</p><div class="tip custom-block"><p class="custom-block-title">Best Practice</p><p>When making debug entities, it helps a lot to give them dialog describing what they are doing to change the game state. Better still is putting the debug behavior behind a multiple-choice dialog so that the debug entity can be disengaged without making any changes in case it is ever engaged by accident.</p></div><h3 id="debug-scripting" tabindex="-1">Debug Scripting <a class="header-anchor" href="#debug-scripting" aria-label="Permalink to “Debug Scripting”">​</a></h3><p>When you check for <code>debug_mode</code> (see <a href="./state.html#checkable-engine-flags">Checkable Engine Flags</a>) in a <a href="./expressions_and_operators.html#bool-expressions">bool expression</a>, you can add additional behavior to your game that is easy to enable when play testing but hidden from players by default.</p><h4 id="debug-logging" tabindex="-1">Debug Logging <a class="header-anchor" href="#debug-logging" aria-label="Permalink to “Debug Logging”">​</a></h4><p>For quickly logging text to the console in debug mode, use the <a href="./macros.html#debug">Debug Macro</a>.</p><div class="language-mgs"><button title="Copy Code" class="copy"></button><span class="lang">mgs</span><pre class="shiki shiki-themes dark-plus light-plus" style="--shiki-dark:#D4D4D4;--shiki-light:#000000;--shiki-dark-bg:#1E1E1E;--shiki-light-bg:#FFFFFF;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26;">script</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;"> {</span></span>
<span class="line highlighted"><span style="--shiki-dark:#C586C0;--shiki-light:#AF00DB;">  if</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;"> (</span><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;">debug_mode</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">) {</span></span>
<span class="line highlighted"><span style="--shiki-dark:#569CD6;--shiki-light:#0000FF;">    show</span><span style="--shiki-dark:#9CDCFE;--shiki-light:#001080;"> serial_dialog</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;"> { </span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515;">&quot;DEBUG INFO!&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;"> }</span></span>
<span class="line highlighted"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">  }</span></span>
<span class="line"><span style="--shiki-dark:#6A9955;--shiki-light:#008000;">  // these are equivalent</span></span>
<span class="line highlighted"><span style="--shiki-dark:#DCDCAA;--shiki-light:#795E26;">  debug!</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">(</span><span style="--shiki-dark:#CE9178;--shiki-light:#A31515;">&quot;DEBUG INFO&quot;</span><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">)</span></span>
<span class="line"><span style="--shiki-dark:#D4D4D4;--shiki-light:#000000;">}</span></span></code></pre></div><h4 id="debug-commands" tabindex="-1">Debug Commands <a class="header-anchor" href="#debug-commands" aria-label="Permalink to “Debug Commands”">​</a></h4><p>You can register debug <a href="./commands.html">commands</a> in a map&#39;s <code>on_load</code> script, and if you put these registrations behind a check for debug mode, they won&#39;t be available to players during normal gameplay.</p><p>We&#39;ve found it useful to include <a href="#debug-logging">debug logging</a> when such a command is registered — both the name and a brief description of what the command does — so you won&#39;t have trouble remember which debug commands you&#39;ve prepared for a given map.</p><h3 id="debug-techniques" tabindex="-1">Debug Techniques <a class="header-anchor" href="#debug-techniques" aria-label="Permalink to “Debug Techniques”">​</a></h3><h4 id="cutscene-skippers" tabindex="-1">Cutscene Skippers <a class="header-anchor" href="#cutscene-skippers" aria-label="Permalink to “Cutscene Skippers”">​</a></h4><p>When debugging later segments of the game, it&#39;s helpful to be able to trigger a script that bypasses otherwise-mandatory cutscenes. Such debug scripts should carefully mirror their real counterparts in terms of <a href="./state.html#save-flags">save flags</a> set and the like, or you might find yourself having to debug the debuggers.</p><h4 id="cutscene-restorers" tabindex="-1">Cutscene Restorers <a class="header-anchor" href="#cutscene-restorers" aria-label="Permalink to “Cutscene Restorers”">​</a></h4><p>Likewise, it sometimes helps to be able to play a cutscene over again. Or, if most or all cutscenes have been bypassed, it helps to turn on a specific one separately.</p><h4 id="puzzle-solvers" tabindex="-1">Puzzle Solvers <a class="header-anchor" href="#puzzle-solvers" aria-label="Permalink to “Puzzle Solvers”">​</a></h4><p>While some puzzles can be simplified to accelerate play testing (such as naming the main character &quot;Bub&quot; when they will later need to be named &quot;Bob&quot;), it&#39;s much faster to make scripts to solve puzzles for you.</p><p>By the end of game development of Chapter 1 of the Black Mage Game, there was a &quot;Debug Exa&quot; capable of solving or partially solving the majority of puzzles.</p><h4 id="choreography-controller" tabindex="-1">Choreography Controller <a class="header-anchor" href="#choreography-controller" aria-label="Permalink to “Choreography Controller”">​</a></h4><p>Whenever you have a small segment of choreography you want to polish, it helps to split the sequence into a separate script that you can trigger at will.</p><h2 id="vector-view" tabindex="-1">Vector View <a class="header-anchor" href="#vector-view" aria-label="Permalink to “Vector View”">​</a></h2><p>One of the in-game debug tools, triggered by pressing <code>XOR</code> and <code>MEM0</code> (the top two buttons on each side of the screen) at the same time. On desktop, press <code>F1</code> and <code>F5</code> instead.</p><p>NOTE: Currently, vector view cannot be toggled when <a href="./state.html#engine-flags">hex_control</a> is off.</p><h3 id="vector-objects" tabindex="-1">Vector Objects <a class="header-anchor" href="#vector-objects" aria-label="Permalink to “Vector Objects”">​</a></h3><p>These include:</p><ul><li>vector paths</li><li>vector shapes</li><li>vector points (displayed as Xs)</li></ul><p>These lines are green ordinarily, but will turn red if the player entity is &quot;inside&quot; them.</p><h3 id="entity-vectors" tabindex="-1">Entity Vectors <a class="header-anchor" href="#entity-vectors" aria-label="Permalink to “Entity Vectors”">​</a></h3><p>Entity hit boxes are half the length and half the height of the entity&#39;s tile size, and are positioned at the bottom-center of the sprite. This box is green by default, but the entity that was most recently interacted with (either with the interact button or hack button) will have a red hitbox instead.</p><p>The entity&#39;s position is considered to be the center of its hitbox as defined above, and is marked by a blue X.</p><h3 id="interaction-hitboxes" tabindex="-1">Interaction Hitboxes <a class="header-anchor" href="#interaction-hitboxes" aria-label="Permalink to “Interaction Hitboxes”">​</a></h3><p>When the player presses the hack button or interact button, a rectangle is cast in front of the player entity. After a successful interaction, the hitbox will be blue, and will be yellow otherwise.</p><h3 id="collision-vectors" tabindex="-1">Collision Vectors <a class="header-anchor" href="#collision-vectors" aria-label="Permalink to “Collision Vectors”">​</a></h3><p>Tiles on the map will have their vector collision shapes drawn in green, unless the engine has determined they are close enough to the player that collision for that tile will need to be checked, after which they will be drawn in yellow. Red lines indicate a collision was detected on that tile.</p><p>The player&#39;s collision spokes (drawn in purple) are projected in front of the player entity. When they cross a tile&#39;s collision geometry, a collision is detected, and the corresponding knockback vector is drawn as a red line extending in the opposite direction.</p><h3 id="collision-details" tabindex="-1">Collision Details <a class="header-anchor" href="#collision-details" aria-label="Permalink to “Collision Details”">​</a></h3><p>In the upper-left corner of the screen is a more detailed view of the actual math behind the collision algorithm.</p>`,43)])])}const u=t(o,[["render",n]]);export{g as __pageData,u as default};
