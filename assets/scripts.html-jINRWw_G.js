import{_ as a,r as t,o,c as l,b as e,d as s,e as i,a as c}from"./app-8J5AkPq7.js";const r="/magedocs/assets/script-alice-k9eXNGhF.png",p={},d=c(`<h1 id="scripts" tabindex="-1"><a class="header-anchor" href="#scripts" aria-hidden="true">#</a> Scripts</h1><p>A <strong>script</strong> is an array of <a href="actions">actions</a> which will execute one after the other, top to bottom, when the script is run.</p><p>It doesn&#39;t strictly matter which file contains which script data, as long as the file is of the right type (either JSON or <a href="mgs/mgs_natlang">MGS Natlang</a>). Scripts therefore must have completely unique names, even if they are inside different script files, or are in different types of script files.</p><h2 id="relative-references" tabindex="-1"><a class="header-anchor" href="#relative-references" aria-hidden="true">#</a> Relative References</h2><p>See: <a href="entities/relative_references">Relative Entity References</a></p><p>For all actions, <a href="relative_references#self"><code>%SELF%</code></a> refers to the entity running the script and <a href="relative_references#player"><code>%PLAYER%</code></a> refers to the player entity.</p><div class="custom-container tip"><p class="custom-container-title">Best Practice: \`%SELF%\` or the entity&#39;s given name?</p><p>Scripts involving only one entity (or one entity and the player) will do best to use <code>%SELF%</code>. For <a href="techniques/cutscenes">cutscenes</a> involving multiple characters, however, you might want to specify the entity specifically (by its given name) in case you have to change which entity is running the script.</p></div><h2 id="null-script" tabindex="-1"><a class="header-anchor" href="#null-script" aria-hidden="true">#</a> <code>null_script</code></h2><p>The only built-in <a href="scripts">script</a> in the Mage Game Engine. This script contains no actions.</p><p>A script can set any normal <a href="script_slots">script slot</a> to <code>null_script</code> with any of the normal script-controlling actions, and can change itself to <code>null_script</code> by using <a href="actions/RUN_SCRIPT">RUN_SCRIPT</a>.</p><h2 id="json-structure" tabindex="-1"><a class="header-anchor" href="#json-structure" aria-hidden="true">#</a> JSON Structure</h2><div class="custom-container warning"><p class="custom-container-title">Deprecated Info</p><p><code>goto index</code> and other features of <a href="mgs/mgs_natlang">MGS Natlang</a> make this kind of script management unnecessary; this section belongs in a museum!</p></div><div class="language-json line-numbers-mode" data-ext="json"><pre class="shiki dark-plus" style="background-color:#1E1E1E;" tabindex="0"><code><span class="line"><span style="color:#D4D4D4;">{</span></span>
<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#9CDCFE;">&quot;show_dialog-alice-start&quot;</span><span style="color:#D4D4D4;">: [</span></span>
<span class="line"><span style="color:#D4D4D4;">    {</span></span>
<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#9CDCFE;">&quot;action&quot;</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">&quot;CHECK_SAVE_FLAG&quot;</span><span style="color:#D4D4D4;">,</span></span>
<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#9CDCFE;">&quot;save_flag&quot;</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">&quot;alice-backstory&quot;</span><span style="color:#D4D4D4;">,</span></span>
<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#9CDCFE;">&quot;expected_bool&quot;</span><span style="color:#D4D4D4;">: </span><span style="color:#569CD6;">true</span><span style="color:#D4D4D4;">,</span></span>
<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#9CDCFE;">&quot;success_script&quot;</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">&quot;show_dialog-alice-summary&quot;</span></span>
<span class="line"><span style="color:#D4D4D4;">    },</span></span>
<span class="line"><span style="color:#D4D4D4;">    {</span></span>
<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#9CDCFE;">&quot;name&quot;</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">&quot;SHOW_DIALOG&quot;</span><span style="color:#D4D4D4;">,</span></span>
<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#9CDCFE;">&quot;dialog&quot;</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">&quot;dialog-alice-start&quot;</span></span>
<span class="line"><span style="color:#D4D4D4;">    },</span></span>
<span class="line"><span style="color:#D4D4D4;">    {</span></span>
<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#9CDCFE;">&quot;name&quot;</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">&quot;SET_SAVE_FLAG&quot;</span><span style="color:#D4D4D4;">,</span></span>
<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#9CDCFE;">&quot;save_flag&quot;</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">&quot;alice-backstory&quot;</span><span style="color:#D4D4D4;">,</span></span>
<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#9CDCFE;">&quot;bool_value&quot;</span><span style="color:#D4D4D4;">: </span><span style="color:#569CD6;">true</span></span>
<span class="line"><span style="color:#D4D4D4;">    }</span></span>
<span class="line"><span style="color:#D4D4D4;">  ],</span></span>
<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#9CDCFE;">&quot;show_dialog-alice-summary&quot;</span><span style="color:#D4D4D4;">: [</span></span>
<span class="line"><span style="color:#D4D4D4;">    {</span></span>
<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#9CDCFE;">&quot;name&quot;</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">&quot;SHOW_DIALOG&quot;</span><span style="color:#D4D4D4;">,</span></span>
<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#9CDCFE;">&quot;dialog&quot;</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">&quot;dialog-alice-summary&quot;</span></span>
<span class="line"><span style="color:#D4D4D4;">    },</span></span>
<span class="line"><span style="color:#D4D4D4;">    {</span></span>
<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#9CDCFE;">&quot;name&quot;</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">&quot;SET_ENTITY_INTERACT_SCRIPT&quot;</span><span style="color:#D4D4D4;">,</span></span>
<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#9CDCFE;">&quot;entity&quot;</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">&quot;%SELF%&quot;</span><span style="color:#D4D4D4;">,</span></span>
<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#9CDCFE;">&quot;script&quot;</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">&quot;show_dialog-alice-start&quot;</span></span>
<span class="line"><span style="color:#D4D4D4;">    }</span></span>
<span class="line"><span style="color:#D4D4D4;">  ]</span></span>
<span class="line"><span style="color:#D4D4D4;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>We want Alice to give her backstory the first time you speak to her, and a summary of her backstory thereafter.</p><p>When we interact with Alice, her <a href="script_slots#on-interact"><code>on_interact</code></a> script is run: <code>show_dialog-alice-start</code>, which is found on line 2. During the course of this script, we set a save flag (<code>alice-backstory</code>) to <code>true</code> (line 14). After the last action is run, the script ends.</p><p>The next interaction will run the last <code>on_interact</code> script used, which happens to be her start script again. But this time, since <code>alice-backstory</code> is <code>true</code>, the script immediately branches, and instead the game runs the script called <code>show_dialog-alice-summary</code>, found on line 19.</p><p>After showing the alternate dialog, the script sets Alice&#39;s <code>on_interact</code> script to her start script (line 25). Note that if we didn&#39;t do this, interacting with her after hearing her backstory summary would result in <code>show_dialog-alice-summary</code> being run again, which in this case is actually what we want. But if there were more than one branch in Alice&#39;s logic, failing to reset the <code>on_interact</code> would result in the other branches being completely ignored. Therefore, all branches should end by setting the entity&#39;s <code>on_interact</code> script to their start script.</p><p><img src="`+r+'" alt="flowchart of Alice&#39;s behavior"></p>',18),D={href:"https://app.diagrams.net/",target:"_blank",rel:"noopener noreferrer"},u=e("p",null,[s("For subsequent examples, I'll be using this flow-chart-esque format to demonstrate script behaviors. For these charts, each column represents a different script (named at the top of each column by a rectangle), and the script under the stick figure indicates the entity's default "),e("code",null,"on_interact"),s(" script.")],-1);function h(y,m){const n=t("ExternalLinkIcon");return o(),l("div",null,[d,e("p",null,[s("For scripts with very complex branching, it can be beneficial to plot them out (and color code them!). This chart was done with "),e("a",D,[s("diagrams.net"),i(n)]),s(", but other graphics software (or a pen and paper) might be used instead.")]),u])}const f=a(p,[["render",h],["__file","scripts.html.vue"]]);export{f as default};
