import{_ as e,o as a,c as s,a as o}from"./app-oyGKrQVR.js";const n={},t=o(`<h1 id="dialogs" tabindex="-1"><a class="header-anchor" href="#dialogs" aria-hidden="true">#</a> Dialogs</h1><p>Dialogs are a visual novel or RPG style dialog system for the screen. These include portrait images, dialog box labels, and dialog messages.</p><p>Dialogs do nothing on their own. To show them, you must use the <a href="actions/SHOW_DIALOG">SHOW_DIALOG</a> action within a <a href="scripts">script</a>.</p><p>Arbitrary <a href="actions">actions</a> cannot be performed by the <a href="scripts">script</a> running a dialog. Therefore, if an <a href="entities">entity</a> must change their behavior partway through a dialog message, you must split the dialog into multiple pieces or use another <a href="script_slots">script slot</a> to control the entity&#39;s behavior.</p><p>Dialog names must be unique throughout the entire game project, though <a href="mgs/mgs_natlang">MGS Natlang</a> will auto generate dialog names when they are not declared.</p><h2 id="properties" tabindex="-1"><a class="header-anchor" href="#properties" aria-hidden="true">#</a> Properties</h2><p>Dialogs must, at bare minimum, have <code>messages</code>. If no <code>name</code> or <code>entity</code> is provided (or is set to an empty string <code>&quot;&quot;</code>), the dialog box label will not appear.</p><h3 id="alignment" tabindex="-1"><a class="header-anchor" href="#alignment" aria-hidden="true">#</a> <code>alignment</code></h3><p><code>alignment</code> controls the position of the dialog box and its portrait/label boxes. Valid choices:</p><ul><li><code>BOTTOM_LEFT</code></li><li><code>BOTTOM_RIGHT</code></li><li><code>TOP_LEFT</code></li><li><code>TOP_RIGHT</code></li></ul><p>In <a href="mgs/mgs_natlang">MGS Natlang</a>, these can be abbreviated to <code>BL</code>, <code>TR</code>, etc.</p><p>::: options DC801 Usage For the DC801 black mage game, dialog alignment should be <code>BOTTOM_RIGHT</code> for the player character, and <code>BOTTOM_LEFT</code> for everything else. <code>TOP_LEFT</code> and <code>TOP_RIGHT</code> are only used when an entity is positioned in such a way that it would most likely be obscured by the dialog box itself. :::</p><p><a href="mgs/mgs_natlang">MGS Natlang</a> will use <code>BOTTOM_LEFT</code> if this property is not provided. A default can also be set for each MGS file individually using <code>settings for dialog {}</code>, or in multiple files when combined with <code>include!()</code>.</p><h3 id="entity" tabindex="-1"><a class="header-anchor" href="#entity" aria-hidden="true">#</a> <code>entity</code></h3><p>Optional. <code>entity</code> refers to a specific entity by its <strong>given name</strong> (the name it was given within Tiled). This is technically optional, but you will almost certainly want to include it.</p><p>This property can be any of the following:</p><ol><li><a href="relative_references#player"><code>%PLAYER%</code></a>, which refers to the player entity</li><li><a href="relative_references#self"><code>%SELF%</code></a>, which refers to the entity running the script</li><li>the <strong>given name</strong> of an entity (no percent signs)</li></ol><p>The MGE will use the referenced entity&#39;s <a href="variables#printing-current-values">current name</a>) for the dialog label automatically.</p><p>For the <code>entity</code> property, you must not use percent signs to refer to entities, or the <a href="encoder">encoder</a> will give you a message in the vein of <code>No entity named %Helga% found on map default!</code> If you don&#39;t want to use an entity&#39;s <a href="variables#printing-current-values">current name</a>) in the dialog label, you must use the <code>name</code> property, which can print a string literally.</p><p>If the referenced entity is a <a href="entity_types#character-entity">character entity</a>, the <a href="encoder">encoder</a> will use <a href="mage_folder#entity_types-json"><code>entity_types.json</code></a> to automatically determine the portrait image.</p><h3 id="name" tabindex="-1"><a class="header-anchor" href="#name" aria-hidden="true">#</a> <code>name</code></h3><p>Optional. <code>name</code> provides a string for dialog box label, and if included, it will override any names inherited from <code>entity</code> above.</p><p>This property can be any of the following:</p><ol><li><a href="relative_references#player"><code>%PLAYER%</code></a>, which refers to the player entity</li><li><a href="relative_references#self"><code>%SELF%</code></a>, which refers to the entity running the script</li><li>an arbitrary ASCII string up to 12 characters long</li><li>the <strong>given name</strong> of an entity, but enclosed in percent signs: <code>%Entity Name%</code></li></ol><p>If you use the entity&#39;s given name without percent signs, it will behave as a static string #3. This will appear to behave the same as #4 in most cases, but #4 will allow inherited dialog labels to reflect the <a href="variables#printing-current-values">entity&#39;s name as it currently exists in RAM</a>) and not the name it was originally assigned.</p><h3 id="portrait" tabindex="-1"><a class="header-anchor" href="#portrait" aria-hidden="true">#</a> <code>portrait</code></h3><p>Optional. This is the name of the portrait defined in <a href="mage_folder#portraits-json"><code>portraits.json</code></a> you want to use for the dialog. This will override any portraits inherited from <code>entity</code> above.</p><p>If the dialog cannot find a portrait to use (either via <code>portrait</code> or <code>entity</code>), then the dialog will display no portrait box.</p><h3 id="border-tileset" tabindex="-1"><a class="header-anchor" href="#border-tileset" aria-hidden="true">#</a> <code>border_tileset</code></h3><p>Optional. This is name of the dialog box tileset you want the dialog box to use, if not the default. (Default is the first border tileset listed in <a href="mage_folder#scenario-json"><code>scenario.json</code></a>.)</p><h3 id="emote" tabindex="-1"><a class="header-anchor" href="#emote" aria-hidden="true">#</a> <code>emote</code></h3><p>Optional. Allows you to select a specific emote within the entity&#39;s entry in <a href="mage_folder#portraits-json"><code>portraits.json</code></a>. The default emote (<code>0</code>) will display if not specified. (While emotes can have assigned names, you must use integers to control them here.)</p><h3 id="messages" tabindex="-1"><a class="header-anchor" href="#messages" aria-hidden="true">#</a> <code>messages</code></h3><p>Each dialog message is limited to five rows of 42 ASCII characters. <a href="mgs/mgs_natlang">MGS Natlang</a> will wrap this text automatically, though you can still hard wrap if you want with <code>\\n</code>.</p><h2 id="json-structure" tabindex="-1"><a class="header-anchor" href="#json-structure" aria-hidden="true">#</a> JSON Structure</h2><div class="custom-container warning"><p class="custom-container-title">Slightly Deprecated</p><p>With the introduction of <a href="mgs/mgs_natlang">MGS Natlang</a>, you need not write dialogs with JSON, but it still may be useful to understand the JSON structure for debugging purposes.</p></div><p>Easiest might be to copy an existing dialog file and make changes to it, particularly if you&#39;re not familiar with JSON.</p><div class="language-json" data-ext="json"><pre class="shiki dark-plus" style="background-color:#1E1E1E;" tabindex="0"><code><span class="line"><span style="color:#D4D4D4;">{</span></span>
<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#9CDCFE;">&quot;dialog-name1&quot;</span><span style="color:#D4D4D4;"> : [],</span></span>
<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#9CDCFE;">&quot;dialog-name2&quot;</span><span style="color:#D4D4D4;"> : [],</span></span>
<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#9CDCFE;">&quot;dialog-another-one&quot;</span><span style="color:#D4D4D4;"> : []</span></span>
<span class="line"><span style="color:#D4D4D4;">}</span></span>
<span class="line"></span></code></pre></div><p>At the top level of the dialog file is a series of several name-value pairs separated by commas. These are the dialog names and their data.</p><p>Within the square brackets above can be any number of object literals (marked with curly braces), each containing a number of name-value pairs for the dialog message and its properties.</p><p>An expanded dialog:</p><div class="language-json" data-ext="json"><pre class="shiki dark-plus" style="background-color:#1E1E1E;" tabindex="0"><code><span class="line"><span style="color:#CE9178;">&quot;dialog-name1&quot;</span><span style="color:#D4D4D4;">: [</span></span>
<span class="line"><span style="color:#D4D4D4;">  {</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#9CDCFE;">&quot;alignment&quot;</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">&quot;BOTTOM_RIGHT&quot;</span><span style="color:#D4D4D4;">,</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#9CDCFE;">&quot;entity&quot;</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">&quot;%PLAYER%&quot;</span><span style="color:#D4D4D4;">,</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#9CDCFE;">&quot;messages&quot;</span><span style="color:#D4D4D4;">: []</span></span>
<span class="line"><span style="color:#D4D4D4;">  },</span></span>
<span class="line"><span style="color:#D4D4D4;">  {</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#9CDCFE;">&quot;alignment&quot;</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">&quot;BOTTOM_LEFT&quot;</span><span style="color:#D4D4D4;">,</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#9CDCFE;">&quot;entity&quot;</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">&quot;Sample Entity&quot;</span><span style="color:#D4D4D4;">,</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#9CDCFE;">&quot;messages&quot;</span><span style="color:#D4D4D4;">: []</span></span>
<span class="line"><span style="color:#D4D4D4;">  }</span></span>
<span class="line"><span style="color:#D4D4D4;">]</span></span>
<span class="line"></span></code></pre></div><p>In the examples above, there are three dialog properties: <code>alignment</code>, <code>entity</code>, and <code>messages</code>. There are additional or alternate properties you might use, but these three are a reasonable minimum.</p><p>The property <code>messages</code> is an array containing the strings for the messages themselves (up to 255 total). Multiple messages within the array will be shown on subsequent dialog boxes, so you don&#39;t need a whole new object literal unless something else about the dialog properties must change, such as a new character beginning to speak.</p><p>An expanded <code>messages</code> entry:</p><div class="language-json" data-ext="json"><pre class="shiki dark-plus" style="background-color:#1E1E1E;" tabindex="0"><code><span class="line"><span style="color:#D4D4D4;">{</span></span>
<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#9CDCFE;">&quot;messages&quot;</span><span style="color:#D4D4D4;">: [</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#CE9178;">&quot;What&#39;s for dinner?&quot;</span><span style="color:#D4D4D4;">,</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#CE9178;">&quot;Memory leek soup!&quot;</span><span style="color:#D4D4D4;">,</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#CE9178;">&quot;....&quot;</span><span style="color:#D4D4D4;">,</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#CE9178;">&quot;...Nah, just kidding. It&#39;s saag paneer.&quot;</span></span>
<span class="line"><span style="color:#D4D4D4;">  ]</span></span>
<span class="line"><span style="color:#D4D4D4;">}</span></span>
<span class="line"></span></code></pre></div><h3 id="options" tabindex="-1"><a class="header-anchor" href="#options" aria-hidden="true">#</a> Options</h3><p>For a multiple choice prompt, there are additional dialog properties:</p><div class="language-json" data-ext="json"><pre class="shiki dark-plus" style="background-color:#1E1E1E;" tabindex="0"><code><span class="line"><span style="color:#D4D4D4;">{</span></span>
<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#9CDCFE;">&quot;messages&quot;</span><span style="color:#D4D4D4;">: [</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#CE9178;">&quot;Would you like to save the game?&quot;</span></span>
<span class="line"><span style="color:#D4D4D4;">  ],</span></span>
<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#9CDCFE;">&quot;response_type&quot;</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">&quot;SELECT_FROM_SHORT_LIST&quot;</span><span style="color:#D4D4D4;">,</span></span>
<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#9CDCFE;">&quot;options&quot;</span><span style="color:#D4D4D4;">: [</span></span>
<span class="line"><span style="color:#D4D4D4;">    {</span></span>
<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#9CDCFE;">&quot;label&quot;</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">&quot;Yes&quot;</span><span style="color:#D4D4D4;">,</span></span>
<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#9CDCFE;">&quot;script&quot;</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">&quot;save_game-yes&quot;</span></span>
<span class="line"><span style="color:#D4D4D4;">    },</span></span>
<span class="line"><span style="color:#D4D4D4;">    {</span></span>
<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#9CDCFE;">&quot;label&quot;</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">&quot;No&quot;</span><span style="color:#D4D4D4;">,</span></span>
<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#9CDCFE;">&quot;script&quot;</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">&quot;save_game-no&quot;</span></span>
<span class="line"><span style="color:#D4D4D4;">    }</span></span>
<span class="line"><span style="color:#D4D4D4;">  ]</span></span>
<span class="line"><span style="color:#D4D4D4;">}</span></span>
<span class="line"></span></code></pre></div><p>Since there are five rows within the dialog box, you can have up to four <code>options</code>. But also take into account how many lines the string in <code>messages</code> is.</p><ul><li><strong><code>response_type</code></strong> — Currently only <code>SELECT_FROM_SHORT_LIST</code> is implemented.</li><li><strong><code>label</code></strong> — How the multiple choice option appears within the game. Normally there is room for 42 characters per line, but since the select cursor takes up a few columns of space, you should instead plan on no more than 39 characters for each of these.</li><li><strong><code>script</code></strong> — This is the name of the script that runs if the player chooses that option.</li></ul><h3 id="text-wrapping" tabindex="-1"><a class="header-anchor" href="#text-wrapping" aria-hidden="true">#</a> Text Wrapping</h3><p>Excess text will wrap awkwardly off the screen unless wrapped with line breaks (<code>\\n</code>).</p><p>Do not use a space after <code>\\n</code> unless you want the next line to begin with a space. Therefore, when manually wrapping text, you will likely use <code>\\n</code> to replace a space character entirely, which can be difficult to read, e.g.:</p><p><code>&quot;Hey, there! This line is really long and\\nwill need to be hard wrapped.&quot;</code></p><blockquote><p>Hey, there! This line is really long and<br> will need to be hard wrapped.</p></blockquote><p>Smart quotes are not a part of ASCII, nor are ellipses (…), so when copying text written in word processors, please take care to replace any such characters with ASCII equivalents.</p><p>To place a double quote within a message, you must type a backslash first: <code>\\&quot;</code></p><p>Example:</p><p><code>&quot;That&#39;s not what he meant by \\&quot;safe,\\&quot; is it?&quot;</code></p><blockquote><p>That&#39;s not what he meant by &quot;safe,&quot; is it?</p></blockquote><p>When using backslash with a special character (like the double quotes above), consider it to be 1 character and not 2 when calculating text wrapping. E.g., the dialog message above is 44 lines in the dialog JSON file, but only 42 characters when displayed in the dialog box, so the message will not need to be hard wrapped.</p><p>Many text editors (such as Visual Studio Code) can tell you how many characters you currently have selected, which makes it easy to determine where line breaks should be inserted.</p>`,63),l=[t];function i(r,p){return a(),s("div",null,l)}const d=e(n,[["render",i],["__file","dialogs.html.vue"]]);export{d as default};
